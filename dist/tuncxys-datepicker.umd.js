(function(f,v){typeof exports=="object"&&typeof module<"u"?module.exports=v():typeof define=="function"&&define.amd?define(v):(f=typeof globalThis<"u"?globalThis:f||self,f.TuncxysDatePicker=v())})(this,(function(){"use strict";const f={tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],weekdays:["Pzt","Sal","Çar","Per","Cum","Cmt","Paz"],timeHeaders:["Saat","Dakika","Saniye"],placeholderDate:"GG/AA/YYYY",warnings:{invalidYear:"Geçersiz yıl! <strong>{year}</strong> olarak düzeltildi.",invalidDate:"Geçersiz tarih! <strong>{date}</strong> olarak düzeltildi.",restrictedDate:"Yasaklı gün! <strong>{date}</strong> seçilemez."},console:{notFound:"TuncxysDatePicker Hata: '{selector}' bulunamadı.",limitWarning:"Güvenlik Uyarısı: Geçersiz tarih limiti. Varsayılana dönüldü."}},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],timeHeaders:["Hour","Minute","Second"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"Invalid year! Corrected to <strong>{year}</strong>.",invalidDate:"Invalid date! Corrected to <strong>{date}</strong>.",restrictedDate:"Restricted day! <strong>{date}</strong> cannot be selected."},console:{notFound:"TuncxysDatePicker Error: '{selector}' not found.",limitWarning:"Security Warning: Invalid date limit. Reverted to default."}},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],weekdays:["一","二","三","四","五","六","日"],timeHeaders:["时","分","秒"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"年份无效！已更正为 <strong>{year}</strong>。",invalidDate:"日期无效！已更正为 <strong>{date}</strong>。",restrictedDate:"限制日期！<strong>{date}</strong> 无法选择。"},console:{notFound:"错误: 未找到 '{selector}'。",limitWarning:"警告: 日期限制无效，已恢复默认。"}},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],weekdays:["Lun","Mar","Mié","Jue","Vie","Sáb","Dom"],timeHeaders:["Hora","Minuto","Segundo"],placeholderDate:"DD/MM/AAAA",warnings:{invalidYear:"¡Año no válido! Corregido a <strong>{year}</strong>.",invalidDate:"¡Fecha no válida! Corregida a <strong>{date}</strong>.",restrictedDate:"¡Día restringido! <strong>{date}</strong> no se puede seleccionar."},console:{notFound:"Error: '{selector}' no encontrado.",limitWarning:"Advertencia: Límite de fecha no válido."}},hi:{months:["जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितंबर","अक्टूबर","नवंबर","दिसंबर"],weekdays:["सोम","मंगल","बुध","गुरु","शुक्र","शनि","रवि"],timeHeaders:["घंटा","मिनट","सेकंड"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"अमान्य वर्ष! <strong>{year}</strong> को सुधारा गया।",invalidDate:"अमान्य तिथि! <strong>{date}</strong> को सुधारा गया।",restrictedDate:"प्रतिबंधित दिन! <strong>{date}</strong> का चयन नहीं किया जा सकता।"},console:{notFound:"त्रुटि: '{selector}' नहीं मिला।",limitWarning:"चेतावनी: अमान्य तिथि सीमा।"}},ar:{months:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],weekdays:["ن","ث","ر","خ","ج","س","ح"],timeHeaders:["ساعة","دقيقة","ثانية"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"سنة غير صالحة! تم التصحيح إلى <strong>{year}</strong>.",invalidDate:"تاريخ غير صالح! تم التصحيح إلى <strong>{date}</strong>.",restrictedDate:"يوم محظور! لا يمكن تحديد <strong>{date}</strong>."},console:{notFound:"خطأ: '{selector}' غير موجود.",limitWarning:"تحذير: حد التاريخ غير صالح."}},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],timeHeaders:["Hora","Minuto","Segundo"],placeholderDate:"DD/MM/AAAA",warnings:{invalidYear:"Ano inválido! Corrigido para <strong>{year}</strong>.",invalidDate:"Data inválida! Corrigida para <strong>{date}</strong>.",restrictedDate:"Dia restrito! <strong>{date}</strong> não pode ser selecionado."},console:{notFound:"Erro: '{selector}' não encontrado.",limitWarning:"Aviso: Limite de data inválido."}},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],timeHeaders:["Час","Минута","Секунда"],placeholderDate:"ДД/ММ/ГГГГ",warnings:{invalidYear:"Неверный год! Исправлено на <strong>{year}</strong>.",invalidDate:"Неверная дата! Исправлено на <strong>{date}</strong>.",restrictedDate:"Запрещенный день! <strong>{date}</strong> нельзя выбрать."},console:{notFound:"Ошибка: '{selector}' не найден.",limitWarning:"Предупреждение: Неверный лимит даты."}},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],weekdays:["月","火","水","木","金","土","日"],timeHeaders:["時","分","秒"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"年が無効です！ <strong>{year}</strong> に修正されました。",invalidDate:"日付が無効です！ <strong>{date}</strong> に修正されました。",restrictedDate:"選択できない日です！ <strong>{date}</strong>"},console:{notFound:"エラー: '{selector}' が見つかりません。",limitWarning:"警告: 日付制限が無効です。"}},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekdays:["Mo","Di","Mi","Do","Fr","Sa","So"],timeHeaders:["Stunde","Minute","Sekunde"],placeholderDate:"TT/MM/JJJJ",warnings:{invalidYear:"Ungültiges Jahr! Korrigiert auf <strong>{year}</strong>.",invalidDate:"Ungültiges Datum! Korrigiert auf <strong>{date}</strong>.",restrictedDate:"Gesperrtes Datum! <strong>{date}</strong> nicht wählbar."},console:{notFound:"Fehler: '{selector}' nicht gefunden.",limitWarning:"Sicherheitswarnung: Ungültiges Datumslimit."}},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],weekdays:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],timeHeaders:["Heure","Minute","Seconde"],placeholderDate:"JJ/MM/AAAA",warnings:{invalidYear:"Année invalide! Corrigée en <strong>{year}</strong>.",invalidDate:"Date invalide! Corrigée en <strong>{date}</strong>.",restrictedDate:"Jour interdit! <strong>{date}</strong> impossible à sélectionner."},console:{notFound:"Erreur: '{selector}' introuvable.",limitWarning:"Alerte: Limite de date invalide."}},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],weekdays:["월","화","수","목","금","토","일"],timeHeaders:["시","분","초"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"잘못된 연도! <strong>{year}</strong>년으로 수정됨.",invalidDate:"잘못된 날짜! <strong>{date}</strong>로 수정됨.",restrictedDate:"선택할 수 없는 날짜! <strong>{date}</strong>"},console:{notFound:"오류: '{selector}'를 찾을 수 없습니다.",limitWarning:"경고: 잘못된 날짜 제한."}},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],weekdays:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"],timeHeaders:["Ora","Minuto","Secondo"],placeholderDate:"GG/MM/AAAA",warnings:{invalidYear:"Anno non valido! Corretto a <strong>{year}</strong>.",invalidDate:"Data non valida! Corretto a <strong>{date}</strong>.",restrictedDate:"Giorno non disponibile! <strong>{date}</strong>."},console:{notFound:"Errore: '{selector}' non trovato.",limitWarning:"Avviso: Limite data non valido."}},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],weekdays:["Sen","Sel","Rab","Kam","Jum","Sab","Min"],timeHeaders:["Jam","Menit","Detik"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"Tahun tidak valid! Diperbaiki menjadi <strong>{year}</strong>.",invalidDate:"Tanggal tidak valid! Diperbaiki menjadi <strong>{date}</strong>.",restrictedDate:"Hari terlarang! <strong>{date}</strong> tidak dapat dipilih."},console:{notFound:"Error: '{selector}' tidak ditemukan.",limitWarning:"Peringatan: Batas tanggal tidak valid."}},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],weekdays:["T2","T3","T4","T5","T6","T7","CN"],timeHeaders:["Giờ","Phút","Giây"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"Năm không hợp lệ! Đã sửa thành <strong>{year}</strong>.",invalidDate:"Ngày không hợp lệ! Đã sửa thành <strong>{date}</strong>.",restrictedDate:"Ngày bị hạn chế! Không thể chọn <strong>{date}</strong>."},console:{notFound:"Lỗi: Không tìm thấy '{selector}'.",limitWarning:"Cảnh báo: Giới hạn ngày không hợp lệ."}},nl:{months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],weekdays:["Ma","Di","Wo","Do","Vr","Za","Zo"],timeHeaders:["Uur","Minuut","Seconde"],placeholderDate:"DD/MM/JJJJ",warnings:{invalidYear:"Ongeldig jaar! Gecorrigeerd naar <strong>{year}</strong>.",invalidDate:"Ongeldige datum! Gecorrigeerd naar <strong>{date}</strong>.",restrictedDate:"Niet beschikbare dag! <strong>{date}</strong>."},console:{notFound:"Fout: '{selector}' niet gevonden.",limitWarning:"Waarschuwing: Ongeldige datumlimiet."}},pl:{months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],weekdays:["Pn","Wt","Śr","Cz","Pt","Sb","Nd"],timeHeaders:["Godzina","Minuta","Sekunda"],placeholderDate:"DD/MM/RRRR",warnings:{invalidYear:"Nieprawidłowy rok! Poprawiono na <strong>{year}</strong>.",invalidDate:"Nieprawidłowa data! Poprawiono na <strong>{date}</strong>.",restrictedDate:"Data niedostępna! <strong>{date}</strong>."},console:{notFound:"Błąd: Nie znaleziono '{selector}'.",limitWarning:"Ostrzeżenie: Nieprawidłowy limit daty."}},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],weekdays:["จ","อ","พ","พฤ","ศ","ส","อา"],timeHeaders:["ชั่วโมง","นาที","วินาที"],placeholderDate:"DD/MM/YYYY",warnings:{invalidYear:"ปีไม่ถูกต้อง! แก้ไขเป็น <strong>{year}</strong>",invalidDate:"วันที่ไม่ถูกต้อง! แก้ไขเป็น <strong>{date}</strong>",restrictedDate:"วันที่ถูกจำกัด! ไม่สามารถเลือก <strong>{date}</strong> ได้"},console:{notFound:"ข้อผิดพลาด: ไม่พบ '{selector}'",limitWarning:"คำเตือน: ขีดจำกัดวันที่ไม่ถูกต้อง"}},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],weekdays:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"],timeHeaders:["Timme","Minut","Sekund"],placeholderDate:"ÅÅÅÅ/MM/DD",placeholderDate:"DD/MM/ÅÅÅÅ",warnings:{invalidYear:"Ogiltigt år! Korrigerad till <strong>{year}</strong>.",invalidDate:"Ogiltigt datum! Korrigerad till <strong>{date}</strong>.",restrictedDate:"Otillgänglig dag! <strong>{date}</strong>."},console:{notFound:"Fel: '{selector}' hittades inte.",limitWarning:"Varning: Ogiltig datumgräns."}},az:{months:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],weekdays:["B.e","Ç.a","Çər","C.a","Cüm","Şən","Baz"],timeHeaders:["Saat","Dəqiqə","Saniyə"],placeholderDate:"GG/AA/İİİİ",warnings:{invalidYear:"Yanlış il! <strong>{year}</strong> olaraq düzəldildi.",invalidDate:"Yanlış tarix! <strong>{date}</strong> olaraq düzəldildi.",restrictedDate:"Qadağan olunmuş gün! <strong>{date}</strong> seçilə bilməz."},console:{notFound:"Xəta: '{selector}' tapılmadı.",limitWarning:"Xəbərdarlıq: Yanlış tarix limiti."}}};class v{constructor(e,t={}){this.options=t,this.lastSentValue=null;const i=t.lang||"en";if(this.selectedLang=f[i]?i:"en",this.lang=f[this.selectedLang],this.container=document.querySelector(e),!this.container){console.error(this.lang.console.notFound.replace("{selector}",e));return}this.onDocumentClick=d=>{const m=this.dom&&this.dom.wrapper&&this.dom.wrapper.contains(d.target),h=this.dom&&this.dom.calendarPopup&&this.dom.calendarPopup.contains(d.target),c=this.dom&&this.dom.timePopup&&this.dom.timePopup.contains(d.target);!m&&!h&&!c&&this.closePickers()},this.onWindowResize=()=>{this.resizeRequest&&cancelAnimationFrame(this.resizeRequest),this.resizeRequest=requestAnimationFrame(()=>{this.closePickers()})},this.submitName=t.submitName||"date_output",this.fixedWidth=t.width||"300px",this.theme=t.theme||"default",this.colors=t.colors||{},this.enableDate=t.enableDate!==void 0?t.enableDate:!0,this.enableTime=t.enableTime!==void 0?t.enableTime:!0,!this.enableDate&&!this.enableTime&&(this.enableDate=!0),this.disableWeekDays=t.disableWeekDays||[],this.disableDates=t.disableDates||[],this.enableLimit=t.enableLimit||!1,this.enableDayLimit=t.enableDayLimit||!1,this.minOffset=t.minOffset!==void 0?t.minOffset:100,this.maxOffset=t.maxOffset!==void 0?t.maxOffset:100,this.container.style.width=this.fixedWidth,this.container.style.maxWidth="100%",this.monthNames=this.lang.months,this.realToday=new Date;const s=d=>{if(!d)return null;if(d instanceof Date)return isNaN(d.getTime())?null:new Date(d.setHours(0,0,0,0));if(!/^\d{4}-\d{2}-\d{2}$/.test(d))return null;const h=d.split("-"),c=parseInt(h[0],10),u=parseInt(h[1],10),p=parseInt(h[2],10);if(u<1||u>12)return null;const g=new Date(c,u-1,p);return g.getFullYear()!==c||g.getMonth()!==u-1||g.getDate()!==p?null:(g.setHours(0,0,0,0),g)},r=(d,m)=>Math.round((d-m)/(1e3*60*60*24));let a=s(t.dateUpperLimit),o=s(t.dateLowerLimit);(t.dateUpperLimit&&!a||t.dateLowerLimit&&!o)&&(console.warn(this.lang.console.limitWarning),this.enableLimit=!1,this.enableDayLimit=!1,this.minOffset=100,this.maxOffset=100,a=null,o=null);const l=new Date(this.realToday.getFullYear(),this.realToday.getMonth(),this.realToday.getDate());if(this.enableDayLimit===!0&&(a||o))if(a&&o&&a<o&&([a,o]=[o,a]),a&&!o){const d=r(a,l);this.maxOffset=d,this.minOffset-=d}else if(!a&&o){const d=r(l,o);this.minOffset=d,this.maxOffset+=r(o,l)}else this.maxOffset=r(a,l),this.minOffset=r(l,o);this.currentDate=new Date,this.currentMonth=this.currentDate.getMonth(),this.currentYear=this.currentDate.getFullYear(),this.selectedDay=null,this.selectedMonth=null,this.selectedYear=null,this.selectedHour="03",this.selectedMinute="00",this.selectedSecond="00",this.inputBuffer="",this.activeSegmentIndex=0,this.SEGMENTS=[];let n=0;this.enableDate&&(this.SEGMENTS.push({type:"day",start:0,end:2,maxLen:2,min:1,max:31},{type:"month",start:3,end:5,maxLen:2,min:1,max:12},{type:"year",start:6,end:10,maxLen:4,min:1900,max:2100}),n=11),this.enableTime&&this.SEGMENTS.push({type:"hour",start:n,end:n+2,maxLen:2,min:0,max:23},{type:"minute",start:n+3,end:n+5,maxLen:2,min:0,max:59},{type:"second",start:n+6,end:n+8,maxLen:2,min:0,max:59}),this.calculateLimits(),(this.enableLimit||this.enableDayLimit)&&(this.currentMonth=this.minDate.getMonth(),this.currentYear=this.minDate.getFullYear()),this.init()}calculateLimits(){this.enableLimit?(this.minDate=new Date(this.realToday.getFullYear(),this.realToday.getMonth()-6,1),this.minDate.setHours(0,0,0,0),this.maxDate=new Date(this.realToday.getFullYear(),this.realToday.getMonth()+6+1,0),this.maxDate.setHours(23,59,59,999)):this.enableDayLimit?(this.minDate=new Date(this.realToday),this.minDate.setDate(this.realToday.getDate()-this.minOffset),this.minDate.setHours(0,0,0,0),this.maxDate=new Date(this.realToday),this.maxDate.setDate(this.realToday.getDate()+this.maxOffset),this.maxDate.setHours(23,59,59,999)):(this.minDate=new Date(this.realToday.getFullYear()-this.minOffset,0,1),this.maxDate=new Date(this.realToday.getFullYear()+this.maxOffset,11,31));const e=this.SEGMENTS.find(t=>t.type==="year");e&&(e.min=this.minDate.getFullYear(),e.max=this.maxDate.getFullYear())}init(){this.buildHTML(),this.cacheDOM(),this.bindEvents(),this.enableDate&&this.dom.calendarPopup&&document.body.appendChild(this.dom.calendarPopup),this.enableTime&&this.dom.timePopup&&document.body.appendChild(this.dom.timePopup),this.dom.warningMsg&&document.body.appendChild(this.dom.warningMsg),this.applyTheme(),this.enableDate&&this.renderCalendar(this.currentMonth,this.currentYear),this.enableTime&&(this.populateTimeColumn(this.dom.hourCol,24,"hour"),this.populateTimeColumn(this.dom.minuteCol,60,"minute"),this.populateTimeColumn(this.dom.secondCol,60,"second"),this.scrollToValues(this.selectedHour,this.selectedMinute,this.selectedSecond));let e=[];this.enableDate&&e.push(this.lang.placeholderDate),this.enableTime&&e.push("03:00:00"),this.dom.input.value=e.join(" "),this.dom.hiddenInput.value="",this.observer=new MutationObserver(t=>{document.body.contains(this.container)||this.destroy()}),this.container.parentNode&&this.observer.observe(document.body,{childList:!0,subtree:!0})}setPopupPosition(e){if(!e||!this.dom.inputGroup)return;const t=this.dom.inputGroup.getBoundingClientRect(),i=window.scrollY||document.documentElement.scrollTop,s=window.scrollX||document.documentElement.scrollLeft;e.style.width=`${t.width}px`;const r=e.offsetWidth,a=e.offsetHeight||350;let o=t.bottom+i+8;window.innerHeight-t.bottom<a&&t.top>a&&(o=t.top+i-a-8);let n=t.left+s+t.width/2-r/2;e.style.top=`${o}px`,e.style.left=`${n}px`}applyTheme(){let e="",t="";if(this.theme==="custom"&&this.colors){const i={background:"--txydp-bg",border:"--txydp-border",borderFocus:"--txydp-border-focus",text:"--txydp-text",placeholder:"--txydp-placeholder",icon:"--txydp-icon",iconHoverBg:"--txydp-icon-bg-hover",hoverBg:"--txydp-day-hover-bg",selectedBg:"--txydp-selected-bg",selectedText:"--txydp-selected-text",todayBg:"--txydp-today-bg",todayText:"--txydp-today-text",weekDayText:"--txydp-weekday-text",passiveText:"--txydp-day-other-month",restricted:"--txydp-restricted-color",error:"--txydp-error-color",toastBg:"--txydp-toast-bg",toastText:"--txydp-toast-text",timeHeader:"--txydp-time-header",timeNum:"--txydp-time-text",timeNumActive:"--txydp-time-text-active",timeSeparator:"--txydp-time-separator",timeGradStart:"--txydp-time-grad-start",timeGradEnd:"--txydp-time-grad-end",selectionBg:"--txydp-selection-bg",selectionText:"--txydp-selection-text"},s=[];for(const[r,a]of Object.entries(i))this.colors[r]&&s.push(`${a}: ${this.colors[r]}`);e=s.join(";")}else this.theme==="dark"&&(t="theme-dark");t&&this.dom.wrapper.classList.add(t),e&&(this.dom.wrapper.style.cssText=e),[this.dom.calendarPopup,this.dom.timePopup,this.dom.warningMsg].forEach(i=>{i&&(i.classList.remove("theme-dark"),t&&i.classList.add(t),e&&(i.style.cssText=e))})}buildHTML(){let e=[];this.enableDate&&e.push(this.lang.placeholderDate),this.enableTime&&e.push("SS:DD:nn");const t=e.join(" "),i=this.lang.weekdays.map(l=>`<div>${l}</div>`).join(""),s=this.enableDate?'<div class="txydp-btn txydp-calendar-btn"><svg viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z" /></svg></div>':"",r=this.enableTime?'<div class="txydp-btn txydp-clock-btn"><svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></svg></div>':"",a=this.enableDate?`
        <div class="txydp-popup txydp-calendar-popup">
            <div class="txydp-calendar-header">
                <div class="txydp-nav-btn txydp-prev-month"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></svg></div>
                <div class="txydp-month-year"></div>
                <div class="txydp-nav-btn txydp-next-month"><svg viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></svg></div>
            </div>
            <div class="txydp-calendar-grid-view"><div class="txydp-weekdays">${i}</div><div class="txydp-days"></div></div>
            <div class="txydp-year-picker"></div>
        </div>`:"",o=this.enableTime?`
        <div class="txydp-popup txydp-time-popup">
            <div class="txydp-time-labels"><div class="txydp-time-label">${this.lang.timeHeaders[0]}</div><div class="txydp-time-label">${this.lang.timeHeaders[1]}</div><div class="txydp-time-label">${this.lang.timeHeaders[2]}</div></div>
            <div class="txydp-time-container"><div class="txydp-highlight"></div><div class="txydp-time-col txydp-hour-col"></div><div class="txydp-time-col txydp-minute-col"></div><div class="txydp-time-col txydp-second-col"></div></div>
            <div class="txydp-time-controls">
                <div class="txydp-control-group"><div class="txydp-control-btn" data-unit="hour" data-dir="down"><svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" /></svg></div><div class="txydp-control-btn" data-unit="hour" data-dir="up"><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z" /></svg></div></div>
                <div class="txydp-control-group"><div class="txydp-control-btn" data-unit="minute" data-dir="down"><svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" /></svg></div><div class="txydp-control-btn" data-unit="minute" data-dir="up"><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z" /></svg></div></div>
                <div class="txydp-control-group"><div class="txydp-control-btn" data-unit="second" data-dir="down"><svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z" /></svg></div><div class="txydp-control-btn" data-unit="second" data-dir="up"><svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z" /></svg></div></div>
            </div>
        </div>`:"";this.container.innerHTML=`
    <div class="txydp-wrapper">
        <input type="hidden" class="txydp-hidden-iso-input" name="${this.submitName}">
        <div class="txydp-warning-message"></div>
        <div class="txydp-input-group">
            <input type="text" name="${this.submitName}_display" inputmode="numeric" class="txydp-date-input" placeholder="${t}" spellcheck="false" autocomplete="off">
            <div class="txydp-icons">${s}${r}</div>
        </div>
        ${a}
        ${o}
    </div>`}cacheDOM(){const e=this.container;this.dom={wrapper:e.querySelector(".txydp-wrapper"),inputGroup:e.querySelector(".txydp-input-group"),warningMsg:e.querySelector(".txydp-warning-message"),input:e.querySelector(".txydp-date-input"),hiddenInput:e.querySelector(".txydp-hidden-iso-input"),calendarBtn:e.querySelector(".txydp-calendar-btn"),clockBtn:e.querySelector(".txydp-clock-btn"),timePopup:e.querySelector(".txydp-time-popup"),calendarPopup:e.querySelector(".txydp-calendar-popup"),monthYearDisplay:e.querySelector(".txydp-month-year"),prevBtn:e.querySelector(".txydp-prev-month"),nextBtn:e.querySelector(".txydp-next-month"),calendarDays:e.querySelector(".txydp-days"),calendarGridView:e.querySelector(".txydp-calendar-grid-view"),yearPickerView:e.querySelector(".txydp-year-picker"),hourCol:e.querySelector(".txydp-hour-col"),minuteCol:e.querySelector(".txydp-minute-col"),secondCol:e.querySelector(".txydp-second-col"),controlBtns:e.querySelectorAll(".txydp-control-btn")}}bindEvents(){const{input:e,calendarBtn:t,clockBtn:i,prevBtn:s,nextBtn:r,monthYearDisplay:a,controlBtns:o}=this.dom;document.addEventListener("click",this.onDocumentClick),window.addEventListener("resize",this.onWindowResize),window.addEventListener("scroll",this.onWindowResize),o&&o.length>0&&o.forEach(n=>{n.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),d.stopImmediatePropagation();const m=n.dataset.unit,h=n.dataset.dir;this.scrollTimeButton(m,h)}),n.addEventListener("mousedown",d=>{d.preventDefault(),d.stopPropagation()})}),e.addEventListener("dragstart",n=>n.preventDefault()),e.addEventListener("drop",n=>n.preventDefault()),e.addEventListener("blur",()=>{this.inputBuffer.length>0&&this.finalizeInput(this.activeSegmentIndex,!0);let n=this.getParsedDateFromInput();this.enableDate&&!isNaN(n.y)&&(this.validateDayCountInMonth(),this.updateInputValue("year",n.y.toString().padStart(4,"0"),!0,!0)),this.inputBuffer=""}),e.addEventListener("click",()=>{const n=e.selectionStart;for(let d=0;d<this.SEGMENTS.length;d++)if(n>=this.SEGMENTS[d].start&&n<=this.SEGMENTS[d].end){this.inputBuffer.length>0&&this.activeSegmentIndex!==d&&this.finalizeInput(this.activeSegmentIndex),this.activeSegmentIndex=d,this.selectSegment(d);break}}),e.addEventListener("keydown",n=>this.handleKeydown(n));const l=n=>{n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()};t&&(t.addEventListener("click",n=>{l(n),this.toggleCalendar()}),t.addEventListener("mousedown",l),t.addEventListener("mouseup",l)),i&&(i.addEventListener("click",n=>{l(n),this.toggleClock()}),i.addEventListener("mousedown",l),i.addEventListener("mouseup",l)),this.enableDate&&(s.addEventListener("click",n=>{n.stopPropagation(),!s.classList.contains("disabled")&&(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--),this.renderCalendar(this.currentMonth,this.currentYear))}),r.addEventListener("click",n=>{n.stopPropagation(),!r.classList.contains("disabled")&&(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.renderCalendar(this.currentMonth,this.currentYear))}),this.enableLimit||(a.classList.add("interactive"),a.addEventListener("click",n=>this.toggleYearView(n))),this.dom.calendarDays.addEventListener("click",n=>{const d=n.target.closest(".txydp-day");if(!d||d.style.visibility==="hidden"||d.style.pointerEvents==="none")return;n.stopPropagation();const m=parseInt(d.innerText);d.classList.contains("other-month")&&(m>15?(this.currentMonth--,this.currentMonth<0&&(this.currentMonth=11,this.currentYear--)):(this.currentMonth++,this.currentMonth>11&&(this.currentMonth=0,this.currentYear++))),this.selectedDay=m,this.selectedMonth=this.currentMonth,this.selectedYear=this.currentYear,this.renderCalendar(this.currentMonth,this.currentYear),this.updateFullInputString()}))}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),document.removeEventListener("click",this.onDocumentClick),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("scroll",this.onWindowResize),this.dom.calendarPopup&&this.dom.calendarPopup.parentNode===document.body&&document.body.removeChild(this.dom.calendarPopup),this.dom.timePopup&&this.dom.timePopup.parentNode===document.body&&document.body.removeChild(this.dom.timePopup),this.dom.warningMsg&&this.dom.warningMsg.parentNode===document.body&&document.body.removeChild(this.dom.warningMsg),this.container.innerHTML="",this.dom=null}updateHiddenInput(){if(this.enableDate&&(this.selectedYear===null||this.selectedMonth===null||this.selectedDay===null))return;if(this.enableDate){let i=new Date(this.selectedYear,this.selectedMonth+1,0).getDate();if(this.selectedDay>i||this.isDateRestricted(new Date(this.selectedYear,this.selectedMonth,this.selectedDay)))return}let e=[];if(this.enableDate){let i=this.selectedYear.toString().padStart(4,"0"),s=(this.selectedMonth+1).toString().padStart(2,"0"),r=this.selectedDay.toString().padStart(2,"0");e.push(`${i}-${s}-${r}`)}this.enableTime&&e.push(`${this.selectedHour}:${this.selectedMinute}:${this.selectedSecond}`);const t=e.join(" ");if(this.lastSentValue!==t&&(this.lastSentValue=t,this.dom.hiddenInput.value=t,this.options.onChange&&typeof this.options.onChange=="function")){let i=null;this.enableDate&&(i=new Date(this.selectedYear,this.selectedMonth,this.selectedDay),this.enableTime&&i.setHours(parseInt(this.selectedHour),parseInt(this.selectedMinute),parseInt(this.selectedSecond))),this.options.onChange(i,t,this)}}scrollTimeButton(e,t){if(!this.enableTime)return;let i;e==="hour"?i=this.dom.hourCol:e==="minute"?i=this.dom.minuteCol:e==="second"&&(i=this.dom.secondCol);const s=32,r=i.scrollTop;t==="down"?i.scrollTo({top:r+s,behavior:"smooth"}):i.scrollTo({top:r-s,behavior:"smooth"})}getParsedDateFromInput(){if(!this.enableDate)return{d:this.realToday.getDate(),m:this.realToday.getMonth(),y:this.realToday.getFullYear()};let e=this.dom.input.value;const t=this.SEGMENTS.find(l=>l.type==="day"),i=this.SEGMENTS.find(l=>l.type==="month"),s=this.SEGMENTS.find(l=>l.type==="year");let r=parseInt(e.substring(t.start,t.end)),a=parseInt(e.substring(i.start,i.end))-1,o=parseInt(e.substring(s.start,s.end));return{d:r,m:a,y:o}}handleKeydown(e){if(["ArrowRight","Tab","Enter"].includes(e.key)){if(e.preventDefault(),this.inputBuffer.length>0&&this.finalizeInput(this.activeSegmentIndex),e.key==="Enter"){this.dom.input.blur(),this.closePickers();return}this.activeSegmentIndex=(this.activeSegmentIndex+1)%this.SEGMENTS.length,this.selectSegment(this.activeSegmentIndex),this.inputBuffer="";return}if(e.key==="ArrowLeft"){e.preventDefault(),this.inputBuffer.length>0&&this.finalizeInput(this.activeSegmentIndex),this.activeSegmentIndex=(this.activeSegmentIndex-1+this.SEGMENTS.length)%this.SEGMENTS.length,this.selectSegment(this.activeSegmentIndex),this.inputBuffer="";return}if(e.key==="Backspace"){e.preventDefault(),this.inputBuffer="";const t=this.SEGMENTS[this.activeSegmentIndex];this.updateInputValue(t.type,"0".repeat(t.maxLen),!0,!1),this.selectSegment(this.activeSegmentIndex);return}/^\d$/.test(e.key)?(e.preventDefault(),this.handleNumberInput(e.key)):e.preventDefault()}selectSegment(e){const t=this.SEGMENTS[e];this.dom.input.setSelectionRange(t.start,t.end)}handleNumberInput(e){const t=this.SEGMENTS[this.activeSegmentIndex];this.inputBuffer+=e;let i=parseInt(this.inputBuffer);if(t.type==="day"&&i>31&&(this.inputBuffer="31"),t.type==="month"&&i>12&&(this.inputBuffer="12"),["day","month","year"].includes(t.type)||t.max&&i>t.max&&(this.inputBuffer=t.max.toString()),this.inputBuffer.length>=t.maxLen)this.finalizeInput(this.activeSegmentIndex),this.activeSegmentIndex<this.SEGMENTS.length-1&&this.activeSegmentIndex++,this.selectSegment(this.activeSegmentIndex),this.inputBuffer="";else{let s=this.inputBuffer.padStart(t.maxLen,"0");this.updateInputValue(t.type,s,!1,!1),this.dom.input.setSelectionRange(t.start,t.end)}}finalizeInput(e,t=!1){const i=this.SEGMENTS[e];if(!this.inputBuffer&&!t)return;let s=this.inputBuffer?parseInt(this.inputBuffer):parseInt(this.dom.input.value.substring(i.start,i.end));i.type==="year"&&this.inputBuffer.length===2&&(s=parseInt("20"+this.inputBuffer));let r=s;if(i.type==="year"&&this.inputBuffer.length>0&&this.inputBuffer.length!==4&&this.inputBuffer.length!==2&&(s=i.min),s<i.min&&(s=i.min),i.max&&s>i.max&&(s=i.max),s!==r){this.triggerErrorEffect();let o=i.type==="year"?this.lang.warnings.invalidYear.replace("{year}",s):this.lang.warnings.invalidDate.replace("{date}",s);this.showWarningMessage(o)}let a=s.toString().padStart(i.maxLen,"0");this.updateInputValue(i.type,a,!0,!0,t),(i.type==="year"||t)&&this.validateDayCountInMonth(),this.inputBuffer=""}validateDayCountInMonth(){if(!this.enableDate)return;let e=this.getParsedDateFromInput();if(isNaN(e.d)||isNaN(e.m)||isNaN(e.y))return;let t=new Date(e.y,e.m+1,0).getDate();if(e.d>t){this.triggerErrorEffect();let i=new Date(e.y,e.m,t);this.isDateRestricted(i)&&(i=this.findNearestValidDate(i));let s=i.getDate().toString().padStart(2,"0"),r=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getFullYear().toString().padStart(4,"0"),o=`${s}/${r}/${a}`,l=this.lang.warnings.invalidDate.replace("{date}",`<strong>${o}</strong>`);this.showWarningMessage(l);let n=this.dom.input.value,m=`${s}/${r}/${a}`;this.enableTime&&n.length>10&&(m+=n.substring(10)),this.dom.input.value=m,this.selectedDay=i.getDate(),this.selectedMonth=i.getMonth(),this.selectedYear=i.getFullYear(),this.renderCalendar(this.selectedMonth,this.selectedYear),this.updateHiddenInput()}}updateInputValue(e,t,i=!1,s=!0,r=!0){let a=this.dom.input.value;const o=this.SEGMENTS.find(n=>n.type===e);if(!o)return;let l=a.substring(0,o.start)+t+a.substring(o.end);if(this.dom.input.value=l,!(!i&&!s)){if(this.enableTime){const n=this.SEGMENTS.find(p=>p.type==="hour"),d=this.SEGMENTS.find(p=>p.type==="minute"),m=this.SEGMENTS.find(p=>p.type==="second");let h=l.substring(n.start,n.end),c=l.substring(d.start,d.end),u=l.substring(m.start,m.end);isNaN(parseInt(h))||(this.selectedHour=h),isNaN(parseInt(c))||(this.selectedMinute=c),isNaN(parseInt(u))||(this.selectedSecond=u),["hour","minute","second"].includes(e)&&this.scrollToValues(this.selectedHour,this.selectedMinute,this.selectedSecond)}if(this.enableDate){let n=parseInt(l.substring(this.SEGMENTS.find(h=>h.type==="day").start,this.SEGMENTS.find(h=>h.type==="day").end)),d=parseInt(l.substring(this.SEGMENTS.find(h=>h.type==="month").start,this.SEGMENTS.find(h=>h.type==="month").end))-1,m=parseInt(l.substring(this.SEGMENTS.find(h=>h.type==="year").start,this.SEGMENTS.find(h=>h.type==="year").end));if(!isNaN(n)&&!isNaN(d)&&!isNaN(m)&&(this.selectedDay=n,this.selectedMonth=d,this.selectedYear=m,["day","month","year"].includes(e))){let h=new Date(this.selectedYear,this.selectedMonth,this.selectedDay),c=new Date(this.minDate);c.setHours(0,0,0,0);let u=new Date(this.maxDate);u.setHours(0,0,0,0);let p=!0;if(h<c&&(s?(this.selectedYear=this.minDate.getFullYear(),this.selectedMonth=this.minDate.getMonth(),this.selectedDay=this.minDate.getDate()):p=!1),h>u&&(s?(this.selectedYear=this.maxDate.getFullYear(),this.selectedMonth=this.maxDate.getMonth(),this.selectedDay=this.maxDate.getDate()):p=!1),s&&(h<c||h>u)){this.triggerErrorEffect();let g=h<c?c:u,y=`${g.getDate().toString().padStart(2,"0")}/${(g.getMonth()+1).toString().padStart(2,"0")}/${g.getFullYear()}`,M=this.lang.warnings.invalidDate.replace("{date}",y);this.showWarningMessage(M);let S=this.selectedDay.toString().padStart(2,"0"),D=(this.selectedMonth+1).toString().padStart(2,"0"),x=this.selectedYear.toString().padStart(4,"0");this.dom.input.value=this.enableTime?`${S}/${D}/${x} ${l.substring(11)}`:`${S}/${D}/${x}`}if((p||s)&&(this.currentYear=this.selectedYear,this.currentMonth=this.selectedMonth,this.renderCalendar(this.currentMonth,this.currentYear),s&&r)){let g=new Date(this.selectedYear,this.selectedMonth,this.selectedDay);if(this.isDateRestricted(g)){this.triggerErrorEffect();const y=this.findNearestValidDate(g);let M=`${y.getDate().toString().padStart(2,"0")}/${(y.getMonth()+1).toString().padStart(2,"0")}/${y.getFullYear()}`,S=this.lang.warnings.restrictedDate.replace("{date}",M);this.showWarningMessage(S),this.selectedYear=y.getFullYear(),this.selectedMonth=y.getMonth(),this.selectedDay=y.getDate(),this.currentYear=this.selectedYear,this.currentMonth=this.selectedMonth;let D=this.selectedDay.toString().padStart(2,"0"),x=(this.selectedMonth+1).toString().padStart(2,"0"),b=this.selectedYear.toString().padStart(4,"0");this.dom.input.value=this.enableTime?`${D}/${x}/${b} ${this.dom.input.value.substring(11)}`:`${D}/${x}/${b}`,this.renderCalendar(this.currentMonth,this.currentYear)}}}}this.updateHiddenInput()}}toggleCalendar(){if(this.enableDate&&(this.dom.timePopup&&this.dom.timePopup.classList.remove("active"),this.dom.calendarPopup.classList.toggle("active"),this.dom.calendarPopup.classList.contains("active"))){if(this.selectedDay===null){let e;const t=new Date(this.realToday).setHours(0,0,0,0),i=this.minDate.getTime(),s=this.maxDate.getTime();t>=i&&t<=s?e=this.realToday:e=this.minDate,this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.renderCalendar(this.currentMonth,this.currentYear)}this.showCalendarView(),this.setPopupPosition(this.dom.calendarPopup)}}toggleClock(){this.enableTime&&(this.dom.calendarPopup&&this.dom.calendarPopup.classList.remove("active"),this.dom.timePopup.classList.toggle("active"),this.dom.timePopup.classList.contains("active")&&(this.setPopupPosition(this.dom.timePopup),setTimeout(()=>{this.scrollToValues(this.selectedHour,this.selectedMinute,this.selectedSecond)},10)))}closePickers(){this.dom.calendarPopup&&this.dom.calendarPopup.classList.remove("active"),this.dom.timePopup&&this.dom.timePopup.classList.remove("active")}populateTimeColumn(e,t,i){const s=document.createElement("div");s.className="txydp-spacer",e.appendChild(s);for(let a=0;a<t;a++){const o=a.toString().padStart(2,"0"),l=document.createElement("div");l.className="txydp-time-cell",l.innerText=o,l.dataset.val=o,e.appendChild(l)}const r=document.createElement("div");r.className="txydp-spacer",e.appendChild(r),e.addEventListener("scroll",()=>{this.handleScroll(e,i)}),e.addEventListener("wheel",a=>{a.preventDefault();const o=32,l=a.deltaY>0?1:-1,n=e.scrollTop+l*o;e.scrollTo({top:n,behavior:"smooth"})},{passive:!1})}handleScroll(e,t){const s=e.scrollTop,r=Math.round(s/32),a=e.querySelectorAll(".txydp-time-cell");if(a.forEach(o=>o.classList.remove("active")),a[r]){a[r].classList.add("active");const o=a[r].dataset.val;t==="hour"&&(this.selectedHour=o),t==="minute"&&(this.selectedMinute=o),t==="second"&&(this.selectedSecond=o),this.updateFullInputString()}}scrollToValues(e,t,i){const r=(a,o)=>{const l=parseInt(o);a.scrollTop=l*32;const n=a.querySelectorAll(".txydp-time-cell");n.forEach(d=>d.classList.remove("active")),n[l]&&n[l].classList.add("active")};r(this.dom.hourCol,e),r(this.dom.minuteCol,t),r(this.dom.secondCol,i)}updateFullInputString(){let e=[];this.enableDate&&(this.selectedDay!==null&&this.selectedMonth!==null&&this.selectedYear!==null?e.push(`${this.selectedDay.toString().padStart(2,"0")}/${(this.selectedMonth+1).toString().padStart(2,"0")}/${this.selectedYear.toString().padStart(4,"0")}`):e.push(this.lang.placeholderDate)),this.enableTime&&e.push(`${this.selectedHour}:${this.selectedMinute}:${this.selectedSecond}`),this.dom.input.value=e.join(" "),this.updateHiddenInput()}showCalendarView(){this.dom.yearPickerView.classList.remove("active"),this.dom.calendarGridView.style.display="block",this.dom.prevBtn.style.visibility="visible",this.dom.nextBtn.style.visibility="visible"}toggleYearView(e){e.stopPropagation(),this.dom.yearPickerView.classList.contains("active")?this.showCalendarView():this.showYearPicker()}showYearPicker(){const e=this.dom.calendarGridView.offsetHeight;this.dom.calendarGridView.style.display="none",this.dom.yearPickerView.classList.add("active"),this.dom.yearPickerView.style.height=e+"px",this.dom.prevBtn.style.visibility="hidden",this.dom.nextBtn.style.visibility="hidden",this.renderYearPicker()}renderYearPicker(){this.dom.yearPickerView.innerHTML="";const e=this.realToday.getFullYear();let t=null;for(let i=this.minDate.getFullYear();i<=this.maxDate.getFullYear();i++){const s=document.createElement("div");s.classList.add("txydp-year-item"),s.innerText=i,i===this.currentYear&&(s.classList.add("selected"),t=s),i===e&&s.classList.add("current-year"),s.addEventListener("click",r=>{r.stopPropagation(),this.currentYear=i,this.currentYear===this.minDate.getFullYear()&&this.currentMonth<this.minDate.getMonth()&&(this.currentMonth=this.minDate.getMonth()),this.currentYear===this.maxDate.getFullYear()&&this.currentMonth>this.maxDate.getMonth()&&(this.currentMonth=this.maxDate.getMonth()),this.renderCalendar(this.currentMonth,this.currentYear),this.showCalendarView()}),this.dom.yearPickerView.appendChild(s)}t&&setTimeout(()=>t.scrollIntoView({block:"center",behavior:"auto"}),0)}isDateRestricted(e){if(!e)return!1;if(this.disableWeekDays.includes(e.getDay()))return!0;const t=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;return this.disableDates.includes(t)}findNearestValidDate(e){if(!this.isDateRestricted(e))return e;let t=1;const i=365,s=e.getTime();for(;t<i;){const r=new Date(s);if(r.setDate(r.getDate()+t),!this.isDateRestricted(r))return r;const a=new Date(s);if(a.setDate(a.getDate()-t),!this.isDateRestricted(a))return a;t++}return e}triggerErrorEffect(){const e=this.dom.wrapper.querySelector(".txydp-input-group");e.classList.remove("input-error"),e.offsetWidth,e.classList.add("input-error"),setTimeout(()=>{e.classList.remove("input-error")},400)}showWarningMessage(e){const t=this.dom.warningMsg;if(!t||!this.dom.inputGroup)return;t.innerHTML=e;const i=this.dom.inputGroup.getBoundingClientRect(),s=window.scrollY||document.documentElement.scrollTop,r=window.scrollX||document.documentElement.scrollLeft,a=i.left+r+i.width/2,o=i.top+s-10;t.style.left=`${a}px`,t.style.top=`${o}px`,t.classList.add("visible"),this.warningTimeout&&clearTimeout(this.warningTimeout),this.warningTimeout=setTimeout(()=>{t.classList.remove("visible")},4e3)}renderCalendar(e,t){if(!this.enableDate)return;this.dom.calendarDays.innerHTML="",this.dom.monthYearDisplay.innerText=`${this.monthNames[e]} ${t}`;let i=new Date(this.minDate);i.setHours(0,0,0,0);let s=new Date(this.maxDate);s.setHours(0,0,0,0);let r=new Date(t,e-1,1),a=new Date(t,e+1,1);r<i&&r.getMonth()!==i.getMonth()?this.dom.prevBtn.classList.add("disabled"):this.dom.prevBtn.classList.remove("disabled"),a>s&&a.getMonth()!==s.getMonth()?this.dom.nextBtn.classList.add("disabled"):this.dom.nextBtn.classList.remove("disabled");let o=new Date(t,e,1).getDay(),l=o===0?6:o-1,n=new Date(t,e+1,0).getDate(),d=new Date(t,e,0).getDate();for(let h=0;h<l;h++){const c=d-l+1+h,u=document.createElement("div");u.classList.add("txydp-day","other-month"),u.innerText=c;let p=new Date(t,e-1,c);p<i&&(u.style.visibility="hidden",u.style.pointerEvents="none"),this.isDateRestricted(p)&&(u.style.pointerEvents="none"),this.dom.calendarDays.appendChild(u)}for(let h=1;h<=n;h++){const c=document.createElement("div");c.classList.add("txydp-day"),c.innerText=h;let u=new Date(t,e,h);u<i||u>s?(c.style.visibility="hidden",c.style.pointerEvents="none"):this.isDateRestricted(u)&&c.classList.add("restricted-day"),this.selectedDay!==null&&h===this.selectedDay&&e===this.selectedMonth&&t===this.selectedYear&&!c.classList.contains("restricted-day")&&c.classList.add("selected"),h===this.realToday.getDate()&&e===this.realToday.getMonth()&&t===this.realToday.getFullYear()&&c.classList.add("today"),this.dom.calendarDays.appendChild(c)}const m=l+n;for(let h=1;h<=42-m;h++){const c=document.createElement("div");c.classList.add("txydp-day","other-month"),c.innerText=h;let u=new Date(t,e+1,h);u>s&&(c.style.visibility="hidden",c.style.pointerEvents="none"),this.isDateRestricted(u)&&(c.style.pointerEvents="none"),this.dom.calendarDays.appendChild(c)}}}return window.TuncxysDatePicker=v,v}));
